# ## Worktrunk User Configuration
#
# Create with `wt config create`.
#
# Location:
#
# - macOS/Linux: `~/.config/worktrunk/config.toml` (or `$XDG_CONFIG_HOME` if set)
# - Windows: `%APPDATA%\worktrunk\config.toml`
#
# ## Worktree path template
#
# Controls where new worktrees are created. Paths are relative to the repository root.
#
# **Variables:**
#
# - `{{ repo }}` — repository directory name
# - `{{ branch }}` — raw branch name (e.g., `feature/auth`)
# - `{{ branch | sanitize }}` — filesystem-safe: `/` and `\` become `-` (e.g., `feature-auth`)
# - `{{ branch | sanitize_db }}` — database-safe: lowercase, underscores, hash suffix (e.g., `feature_auth_x7k`)
#
# **Examples** for repo at `~/code/myproject`, branch `feature/auth`:
#
# # Default — siblings in parent directory
# # Creates: ~/code/myproject.feature-auth
# worktree-path = "../{{ repo }}.{{ branch | sanitize }}"
#
# # Inside the repository
# # Creates: ~/code/myproject/.worktrees/feature-auth
# worktree-path = ".worktrees/{{ branch | sanitize }}"
#
# # Namespaced (useful when multiple repos share a parent directory)
# # Creates: ~/code/worktrees/myproject/feature-auth
# worktree-path = "../worktrees/{{ repo }}/{{ branch | sanitize }}"
#
# # Nested bare repo (git clone --bare <url> project/.git)
# # Creates: ~/code/project/feature-auth (sibling to .git)
# worktree-path = "../{{ branch | sanitize }}"
#
# ## LLM commit messages
#
# Generate commit messages automatically during merge. Requires an external CLI tool.
#
# See LLM commits docs (https://worktrunk.dev/llm-commits/) for setup and Custom prompt templates (#custom-prompt-templates) for template customization.
#
# ## Commands
#
# ### List
#
# Persistent flag values for `wt list`. Override on command line as needed.
#
# [list]
# full = false       # Show CI status and main…± diffstat columns (--full)
# branches = false   # Include branches without worktrees (--branches)
# remotes = false    # Include remote-only branches (--remotes)
#
# ### Commit
#
# Shared by `wt step commit`, `wt step squash`, and `wt merge`.
#
# [commit]
# stage = "all"      # What to stage before commit: "all", "tracked", or "none"
#
# ### Merge
#
# All flags are on by default. Set to false to change default behavior.
#
# [merge]
# squash = true      # Squash commits into one (--no-squash to preserve history)
# commit = true      # Commit uncommitted changes first (--no-commit to skip)
# rebase = true      # Rebase onto target before merge (--no-rebase to skip)
# remove = true      # Remove worktree after merge (--no-remove to keep)
# verify = true      # Run project hooks (--no-verify to skip)
#
# ### Select
#
# Pager behavior for `wt select` diff previews.
#
# [select]
# # Pager command with flags for diff preview (overrides git's core.pager)
# # Use this to specify pager flags needed for non-TTY contexts
# # Example:
# # pager = "delta --paging=never"
#
# ### User project-specific settings
#
# For context:
#
# - Project config (https://worktrunk.dev/config.md#worktrunk-project-configuration/) settings are shared with teammates.
# - User configs generally apply to all projects.
# - User configs _also_ has a `[projects]` table which holds project-specific settings for the user, such as approved hook commands and worktree layout. That's what this section covers.
#
# Entries are keyed by project identifier (e.g., `github.com/user/repo`).
#
# #### Approved hook commands
#
# When a project hook runs for the first time, Worktrunk asks for approval. Approved commands are saved here, preventing repeated prompts.
#
# [projects."github.com/user/repo"]
# approved-commands = ["npm ci", "npm test"]
#
# To reset, delete the entry or run `wt hook approvals clear`.
#
# #### Setting overrides (Experimental)
#
# Override global user config for a specific project. Scalar values (like `worktree-path`) replace the global value. Hooks append — both global and per-project hooks run.
#
# [projects."github.com/user/repo"]
# worktree-path = ".worktrees/{{ branch | sanitize }}"
# list.full = true
# merge.squash = false
# post-create.env = "cp .env.example .env"
#
# ### Custom prompt templates
#
# Templates use minijinja (https://docs.rs/minijinja/) syntax.
#
# #### Commit template
#
# Available variables:
#
# - `{{ git_diff }}`, `{{ git_diff_stat }}` — diff content
# - `{{ branch }}`, `{{ repo }}` — context
# - `{{ recent_commits }}` — recent commit messages
#
# Default template:
#
# <!-- DEFAULT_TEMPLATE_START -->
# [commit.generation]
# template = """
# Write a commit message for the staged changes below.
#
# <format>
# - Subject under 50 chars, blank line, then optional body
# - Output only the commit message, no quotes or code blocks
# </format>
#
# <style>
# - Imperative mood: "Add feature" not "Added feature"
# - Match recent commit style (conventional commits if used)
# - Describe the change, not the intent or benefit
# </style>
#
# <diffstat>
# {{ git_diff_stat }}
# </diffstat>
#
# <diff>
# {{ git_diff }}
# </diff>
#
# <context>
# Branch: {{ branch }}
# {% if recent_commits %}<recent_commits>
# {% for commit in recent_commits %}- {{ commit }}
# {% endfor %}</recent_commits>{% endif %}
# </context>
#
# """
# <!-- DEFAULT_TEMPLATE_END -->
#
# #### Squash template
#
# Available variables (in addition to commit template variables):
#
# - `{{ commits }}` — list of commits being squashed
# - `{{ target_branch }}` — merge target branch
#
# Default template:
#
# <!-- DEFAULT_SQUASH_TEMPLATE_START -->
# [commit.generation]
# squash-template = """
# Combine these commits into a single commit message.
#
# <format>
# - Subject under 50 chars, blank line, then optional body
# - Output only the commit message, no quotes or code blocks
# </format>
#
# <style>
# - Imperative mood: "Add feature" not "Added feature"
# - Match the style of commits being squashed (conventional commits if used)
# - Describe the change, not the intent or benefit
# </style>
#
# <commits branch="{{ branch }}" target="{{ target_branch }}">
# {% for commit in commits %}- {{ commit }}
# {% endfor %}</commits>
#
# <diffstat>
# {{ git_diff_stat }}
# </diffstat>
#
# <diff>
# {{ git_diff }}
# </diff>
#
# """
# <!-- DEFAULT_SQUASH_TEMPLATE_END -->
