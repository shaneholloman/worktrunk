---
source: tests/integration_tests/help.rs
info:
  program: wt
  args:
    - config
    - "--help"
  env:
    CLICOLOR_FORCE: "1"
    COLUMNS: "150"
    GIT_EDITOR: ""
    RUST_LOG: warn
    SOURCE_DATE_EPOCH: "1735776000"
    TERM: alacritty
    WORKTRUNK_CONFIG_PATH: /nonexistent/test/config.toml
    WORKTRUNK_TEST_SKIP_URL_HEALTH_CHECK: "1"
---
success: true
exit_code: 0
----- stdout -----

----- stderr -----
wt config - Manage configuration and shell integration

Usage: [1m[36mwt config[0m [36m[OPTIONS][0m [36m<COMMAND>

[1m[32mCommands:
  [1m[36mshell[0m   Shell integration setup
  [1m[36mcreate[0m  Create configuration file
  [1m[36mshow[0m    Show configuration files & locations
  [1m[36mstate[0m   Manage internal data and cache

[1m[32mOptions:
  [1m[36m-h[0m, [1m[36m--help
          Print help (see a summary with '-h')

[1m[32mGlobal Options:
  [1m[36m-C[0m[36m [0m[36m<path>
          Working directory for this command

      [1m[36m--config[0m[36m [0m[36m<path>
          User config file path

  [1m[36m-v[0m, [1m[36m--verbose[0m[36m...
          Show debug info (-v), or also write diagnostic report (-vv)

Manages configuration, shell integration, and runtime settings.

Worktrunk uses two configuration files:

        File                 Location                                        Purpose                             
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 
   User config    ~/.config/worktrunk/config.toml Personal settings, command defaults, approved project commands 
   Project config .config/wt.toml                 Lifecycle hooks, checked into version control                  

[32mExamples

Install shell integration (required for directory switching):

  [2mwt config shell install

Create user config file with documented examples:

  [2mwt config create

Create project config file ([2m.config/wt.toml[0m) for hooks:

  [2mwt config create --project

Show current configuration and file locations:

  [2mwt config show

[32mUser config

The user config stores personal preferences that apply across all repositories. Create it with [2mwt config create[0m and view with [2mwt config show[0m.

[1mWorktree path template

Controls where new worktrees are created. The template is relative to the repository root.

[1mAvailable variables:
- [2m{{ repo }}[0m â€” repository directory name
- [2m{{ branch }}[0m â€” raw branch name (e.g., [2mfeature/auth[0m)
- [2m{{ branch | sanitize }}[0m â€” branch name with [2m/[0m and [2m\[0m replaced by [2m-

[1mExamples[0m for a repo at [2m~/code/myproject[0m creating branch [2mfeature/login[0m:

  [2m# Default â€” siblings in parent directory
  [2m# Creates: ~/code/myproject.feature-login
  [2mworktree-path = "../{{ repo }}.{{ branch | sanitize }}"
  [2m
  [2m# Inside the repository
  [2m# Creates: ~/code/myproject/.worktrees/feature-login
  [2mworktree-path = ".worktrees/{{ branch | sanitize }}"
  [2m
  [2m# Namespaced (useful when multiple repos share a parent directory)
  [2m# Creates: ~/code/worktrees/myproject/feature-login
  [2mworktree-path = "../worktrees/{{ repo }}/{{ branch | sanitize }}"
  [2m
  [2m# Nested bare repo (git clone --bare <url> project/.git)
  [2m# Creates: ~/code/project/feature-login (sibling to .git)
  [2mworktree-path = "../{{ branch | sanitize }}"

[1mCommand settings

Set persistent flag values for commands. These apply unless explicitly overridden on the command line.

[1m[2mwt list[0m:

  [2m[list]
  [2m# All off by default
  [2mfull = true      # --full
  [2mbranches = true  # --branches
  [2mremotes = true   # --remotes

[1m[2mwt step commit[0m and [2mwt merge[0m staging:

  [2m[commit]
  [2mstage = "all"    # "all" (default), "tracked", or "none"

[1m[2mwt merge[0m:

  [2m[merge]
  [2m# These flags are on by default; set to false to disable
  [2msquash = false  # Preserve individual commits (--no-squash)
  [2mcommit = false  # Skip committing uncommitted changes (also disables squash)
  [2mrebase = false  # Skip rebase (fails if not already rebased)
  [2mremove = false  # Keep worktree after merge (--no-remove)
  [2mverify = false  # Skip hooks (--no-verify)

[1mLLM commit messages

Configure automatic commit message generation. Requires an external tool like llm:

  [2m[commit-generation]
  [2mcommand = "llm"
  [2margs = ["-m", "claude-haiku-4.5"]

See LLM Commit Messages for setup details and template customization.

[1mApproved commands

When project hooks run for the first time, Worktrunk prompts for approval. Approved commands are saved here automatically:

  [2m[projects."my-project"]
  [2mapproved-commands = ["npm ci", "npm test"]

Manage approvals with [2mwt hook approvals add[0m to review and pre-approve commands, and [2mwt hook approvals clear[0m to reset (add [2m--global[0m to clear all 
projects).

[1mUser hooks

Personal hooks that run for all repositories. Use the same syntax as project hooks:

  [2m[post-create]
  [2msetup = "echo 'Setting up worktree...'"
  [2m
  [2m[pre-merge]
  [2mnotify = "notify-send 'Merging {{ branch }}'"

User hooks run before project hooks and don't require approval. Skip with [2m--no-verify[0m.

See [2mwt hook[0m for complete documentation.

[32mProject config

The project config defines lifecycle hooks and project-specific settings. This file is checked into version control and shared across the team.

Create [2m.config/wt.toml[0m in the repository root:

  [2m[post-create]
  [2minstall = "npm ci"
  [2m
  [2m[pre-merge]
  [2mtest = "npm test"
  [2mlint = "npm run lint"

See [2mwt hook[0m for complete documentation on hook types, execution order, template variables, and JSON context.

[1mDev server URL

The [2m[list][0m section adds a URL column to [2mwt list[0m:

  [2m[list]
  [2murl = "http://localhost:{{ branch | hash_port }}"

URLs are dimmed when the port isn't listening. The template supports [2m{{ branch }}[0m with filters [2mhash_port[0m (port 10000-19999) and [2msanitize[0m 
(filesystem-safe).

[1mCI platform override

The [2m[ci][0m section overrides CI platform detection for GitHub Enterprise or self-hosted GitLab with custom domains:

  [2m[ci]
  [2mplatform = "github"  # or "gitlab"

By default, the platform is detected from the remote URL. Use this when URL detection fails (e.g., [2mgit.mycompany.com[0m instead of [2mgithub.mycompany.com[0m).

[32mShell integration

Worktrunk needs shell integration to change directories when switching worktrees. Install with:

  [2mwt config shell install

Or manually add to the shell config:

  [2m# For bash: add to ~/.bashrc
  [2meval "$(wt config shell init bash)"
  [2m
  [2m# For zsh: add to ~/.zshrc
  [2meval "$(wt config shell init zsh)"
  [2m
  [2m# For fish: add to ~/.config/fish/config.fish
  [2mwt config shell init fish | source

Without shell integration, [2mwt switch[0m prints the target directory but cannot [2mcd[0m into it.

[1mSkip first-run prompt

On first run without shell integration, Worktrunk offers to install it. Suppress this prompt in CI or automated environments:

  [2mskip-shell-integration-prompt = true

Or via environment variable:

  [2mexport WORKTRUNK_SKIP_SHELL_INTEGRATION_PROMPT=true

[32mEnvironment variables

All user config options can be overridden with environment variables using the [2mWORKTRUNK_[0m prefix.

[1mNaming convention

Config keys use kebab-case ([2mworktree-path[0m), while env vars use SCREAMING_SNAKE_CASE ([2mWORKTRUNK_WORKTREE_PATH[0m). The conversion happens automatically.

For nested config sections, use double underscores to separate levels:

            Config                   Environment Variable         
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 
   worktree-path             WORKTRUNK_WORKTREE_PATH              
   commit-generation.command WORKTRUNK_COMMIT_GENERATION__COMMAND 
   commit-generation.args    WORKTRUNK_COMMIT_GENERATION__ARGS    

Note the single underscore after [2mWORKTRUNK[0m and double underscores between nested keys.

[1mArray values

Array config values like [2margs = ["-m", "claude-haiku"][0m can be specified as a single string in environment variables:

  [2mexport WORKTRUNK_COMMIT_GENERATION__ARGS="-m claude-haiku"

[1mExample: CI/testing override

Override the LLM command in CI to use a mock:

  [2mWORKTRUNK_COMMIT_GENERATION__COMMAND=echo \
  [2mWORKTRUNK_COMMIT_GENERATION__ARGS="test: automated commit" \
  [2m  wt merge

[1mOther environment variables

               Variable                                                   Purpose                                      
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 
   WORKTRUNK_BIN                     Override binary path for shell wrappers (useful for testing dev builds)           
   WORKTRUNK_CONFIG_PATH             Override user config file location                                                
   WORKTRUNK_DIRECTIVE_FILE          Internal: set by shell wrappers to enable directory changes                       
   WORKTRUNK_SHELL                   Internal: set by shell wrappers to indicate shell type (e.g., powershell)         
   WORKTRUNK_MAX_CONCURRENT_COMMANDS Max parallel git commands (default: 32). Lower if hitting file descriptor limits. 
   NO_COLOR                          Disable colored output (standard)                                                 
   CLICOLOR_FORCE                    Force colored output even when not a TTY
