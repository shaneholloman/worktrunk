---
source: tests/integration_tests/help.rs
info:
  program: wt
  args:
    - config
    - create
    - "--help"
  env:
    CLICOLOR_FORCE: "1"
    COLUMNS: "500"
    LANG: C
    LC_ALL: C
    PSModulePath: ""
    RUST_LOG: warn
    SHELL: ""
    TERM: alacritty
    WORKTRUNK_CONFIG_PATH: /nonexistent/test/config.toml
    WORKTRUNK_TEST_CLAUDE_INSTALLED: "0"
    WORKTRUNK_TEST_POWERSHELL_ENV: "0"
    WORKTRUNK_TEST_SKIP_URL_HEALTH_CHECK: "1"
    WT_TEST_DELAYED_STREAM_MS: "-1"
    WT_TEST_EPOCH: "1735776000"
---
success: true
exit_code: 0
----- stdout -----

----- stderr -----
wt config create - Create configuration file

Usage: [1m[36mwt config create[0m [36m[OPTIONS][0m

[1m[32mOptions:[0m
      [1m[36m--project[0m
          Create project config ([1m.config/wt.toml[0m) instead of user config

  [1m[36m-h[0m, [1m[36m--help[0m
          Print help (see a summary with '-h')

[1m[32mGlobal Options:[0m
  [1m[36m-C[0m[36m [0m[36m<path>[0m
          Working directory for this command

      [1m[36m--config[0m[36m [0m[36m<path>[0m
          User config file path

  [1m[36m-v[0m, [1m[36m--verbose[0m[36m...[0m
          Verbose output (-v: hooks, templates; -vv: debug report)

[1m[32mUser config[0m

Creates [2m~/.config/worktrunk/config.toml[0m with the following content:

  [2m# # User Configuration[0m
  [2m#[0m
  [2m# Create with `wt config create`.[0m
  [2m#[0m
  [2m# Location:[0m
  [2m#[0m
  [2m# - macOS/Linux: `~/.config/worktrunk/config.toml` (or `$XDG_CONFIG_HOME` if set)[0m
  [2m# - Windows: `%APPDATA%\worktrunk\config.toml`[0m
  [2m#[0m
  [2m# ## Worktree path template[0m
  [2m#[0m
  [2m# Controls where new worktrees are created.[0m
  [2m#[0m
  [2m# **Variables:**[0m
  [2m#[0m
  [2m# - `{{ repo_path }}` â€” absolute path to the repository (e.g., `/Users/me/code/myproject`)[0m
  [2m# - `{{ repo }}` â€” repository directory name (e.g., `myproject`)[0m
  [2m# - `{{ branch }}` â€” raw branch name (e.g., `feature/auth`)[0m
  [2m# - `{{ branch | sanitize }}` â€” filesystem-safe: `/` and `\` become `-` (e.g., `feature-auth`)[0m
  [2m# - `{{ branch | sanitize_db }}` â€” database-safe: lowercase, underscores, hash suffix (e.g., `feature_auth_x7k`)[0m
  [2m#[0m
  [2m# **Examples** for repo at `~/code/myproject`, branch `feature/auth`:[0m
  [2m#[0m
  [2m# # Default â€” sibling directory[0m
  [2m# # Creates: ~/code/myproject.feature-auth[0m
  [2m# # worktree-path = "{{ repo_path }}/../{{ repo }}.{{ branch | sanitize }}"[0m
  [2m#[0m
  [2m# # Inside the repository[0m
  [2m# # Creates: ~/code/myproject/.worktrees/feature-auth[0m
  [2m# worktree-path = "{{ repo_path }}/.worktrees/{{ branch | sanitize }}"[0m
  [2m#[0m
  [2m# # Centralized worktrees directory[0m
  [2m# # Creates: ~/worktrees/myproject/feature-auth[0m
  [2m# worktree-path = "~/worktrees/{{ repo }}/{{ branch | sanitize }}"[0m
  [2m#[0m
  [2m# `~` expands to the home directory. Relative paths are relative to the repository root.[0m
  [2m#[0m
  [2m# ## LLM commit messages[0m
  [2m#[0m
  [2m# Generate commit messages automatically during merge. Requires an external CLI tool.[0m
  [2m#[0m
  [2m# See LLM commits docs (https://worktrunk.dev/llm-commits/) for setup and Custom prompt templates (#custom-prompt-templates) for template customization.[0m
  [2m#[0m
  [2m# ## Command config[0m
  [2m#[0m
  [2m# ### List[0m
  [2m#[0m
  [2m# Persistent flag values for `wt list`. Override on command line as needed.[0m
  [2m#[0m
  [2m# [list][0m
  [2m# full = false       # Show CI status and mainâ€¦Â± diffstat columns (--full)[0m
  [2m# branches = false   # Include branches without worktrees (--branches)[0m
  [2m# remotes = false    # Include remote-only branches (--remotes)[0m
  [2m#[0m
  [2m# ### Commit[0m
  [2m#[0m
  [2m# Shared by `wt step commit`, `wt step squash`, and `wt merge`.[0m
  [2m#[0m
  [2m# [commit][0m
  [2m# stage = "all"      # What to stage before commit: "all", "tracked", or "none"[0m
  [2m#[0m
  [2m# ### Merge[0m
  [2m#[0m
  [2m# All flags are on by default. Set to false to change default behavior.[0m
  [2m#[0m
  [2m# [merge][0m
  [2m# squash = true      # Squash commits into one (--no-squash to preserve history)[0m
  [2m# commit = true      # Commit uncommitted changes first (--no-commit to skip)[0m
  [2m# rebase = true      # Rebase onto target before merge (--no-rebase to skip)[0m
  [2m# remove = true      # Remove worktree after merge (--no-remove to keep)[0m
  [2m# verify = true      # Run project hooks (--no-verify to skip)[0m
  [2m#[0m
  [2m# ### Select[0m
  [2m#[0m
  [2m# Pager behavior for `wt select` diff previews.[0m
  [2m#[0m
  [2m# [select][0m
  [2m# # Pager command with flags for diff preview (overrides git's core.pager)[0m
  [2m# # Use this to specify pager flags needed for non-TTY contexts[0m
  [2m# # Example:[0m
  [2m# # pager = "delta --paging=never"[0m
  [2m#[0m
  [2m# ### User project-specific settings[0m
  [2m#[0m
  [2m# For context:[0m
  [2m#[0m
  [2m# - Project config (https://worktrunk.dev/config/#project-configuration) settings are shared with teammates.[0m
  [2m# - User configs generally apply to all projects.[0m
  [2m# - User configs _also_ has a `[projects]` table which holds project-specific settings for the user, such as approved hook commands and worktree layout. That's what this section covers.[0m
  [2m#[0m
  [2m# Entries are keyed by project identifier (e.g., `github.com/user/repo`).[0m
  [2m#[0m
  [2m# #### Approved hook commands[0m
  [2m#[0m
  [2m# When a project hook runs for the first time, Worktrunk asks for approval. Approved commands are saved here, preventing repeated prompts.[0m
  [2m#[0m
  [2m# [projects."github.com/user/repo"][0m
  [2m# approved-commands = ["npm ci", "npm test"][0m
  [2m#[0m
  [2m# To reset, delete the entry or run `wt hook approvals clear`.[0m
  [2m#[0m
  [2m# #### Setting overrides (Experimental)[0m
  [2m#[0m
  [2m# Override global user config for a specific project. Scalar values (like `worktree-path`) replace the global value. Hooks append â€” both global and per-project hooks run.[0m
  [2m#[0m
  [2m# [projects."github.com/user/repo"][0m
  [2m# worktree-path = ".worktrees/{{ branch | sanitize }}"[0m
  [2m# list.full = true[0m
  [2m# merge.squash = false[0m
  [2m# post-create.env = "cp .env.example .env"[0m
  [2m#[0m
  [2m# ### Custom prompt templates[0m
  [2m#[0m
  [2m# Templates use minijinja (https://docs.rs/minijinja/) syntax.[0m
  [2m#[0m
  [2m# #### Commit template[0m
  [2m#[0m
  [2m# Available variables:[0m
  [2m#[0m
  [2m# - `{{ git_diff }}`, `{{ git_diff_stat }}` â€” diff content[0m
  [2m# - `{{ branch }}`, `{{ repo }}` â€” context[0m
  [2m# - `{{ recent_commits }}` â€” recent commit messages[0m
  [2m#[0m
  [2m# Default template:[0m
  [2m#[0m
  [2m# <!-- DEFAULT_TEMPLATE_START -->[0m
  [2m# [commit.generation][0m
  [2m# template = """[0m
  [2m# Write a commit message for the staged changes below.[0m
  [2m#[0m
  [2m# <format>[0m
  [2m# - Subject line under 50 chars[0m
  [2m# - For material changes, add a blank line then a body paragraph explaining the change[0m
  [2m# - Output only the commit message, no quotes or code blocks[0m
  [2m# </format>[0m
  [2m#[0m
  [2m# <style>[0m
  [2m# - Imperative mood: "Add feature" not "Added feature"[0m
  [2m# - Match recent commit style (conventional commits if used)[0m
  [2m# - Describe the change, not the intent or benefit[0m
  [2m# </style>[0m
  [2m#[0m
  [2m# <diffstat>[0m
  [2m# {{ git_diff_stat }}[0m
  [2m# </diffstat>[0m
  [2m#[0m
  [2m# <diff>[0m
  [2m# {{ git_diff }}[0m
  [2m# </diff>[0m
  [2m#[0m
  [2m# <context>[0m
  [2m# Branch: {{ branch }}[0m
  [2m# {% if recent_commits %}<recent_commits>[0m
  [2m# {% for commit in recent_commits %}- {{ commit }}[0m
  [2m# {% endfor %}</recent_commits>{% endif %}[0m
  [2m# </context>[0m
  [2m#[0m
  [2m# """[0m
  [2m# <!-- DEFAULT_TEMPLATE_END -->[0m
  [2m#[0m
  [2m# #### Squash template[0m
  [2m#[0m
  [2m# Available variables (in addition to commit template variables):[0m
  [2m#[0m
  [2m# - `{{ commits }}` â€” list of commits being squashed[0m
  [2m# - `{{ target_branch }}` â€” merge target branch[0m
  [2m#[0m
  [2m# Default template:[0m
  [2m#[0m
  [2m# <!-- DEFAULT_SQUASH_TEMPLATE_START -->[0m
  [2m# [commit.generation][0m
  [2m# squash-template = """[0m
  [2m# Combine these commits into a single commit message.[0m
  [2m#[0m
  [2m# <format>[0m
  [2m# - Subject line under 50 chars[0m
  [2m# - For material changes, add a blank line then a body paragraph explaining the change[0m
  [2m# - Output only the commit message, no quotes or code blocks[0m
  [2m# </format>[0m
  [2m#[0m
  [2m# <style>[0m
  [2m# - Imperative mood: "Add feature" not "Added feature"[0m
  [2m# - Match the style of commits being squashed (conventional commits if used)[0m
  [2m# - Describe the change, not the intent or benefit[0m
  [2m# </style>[0m
  [2m#[0m
  [2m# <commits branch="{{ branch }}" target="{{ target_branch }}">[0m
  [2m# {% for commit in commits %}- {{ commit }}[0m
  [2m# {% endfor %}</commits>[0m
  [2m#[0m
  [2m# <diffstat>[0m
  [2m# {{ git_diff_stat }}[0m
  [2m# </diffstat>[0m
  [2m#[0m
  [2m# <diff>[0m
  [2m# {{ git_diff }}[0m
  [2m# </diff>[0m
  [2m#[0m
  [2m# """[0m
  [2m# <!-- DEFAULT_SQUASH_TEMPLATE_END -->[0m

[1m[32mProject config[0m

With [2m--project[0m, creates [2m.config/wt.toml[0m in the current repository:

  [2m# Worktrunk Project Configuration[0m
  [2m# Copy to: <repo>/.config/wt.toml[0m
  [2m#[0m
  [2m# Project-specific hooks that run automatically during worktree operations.[0m
  [2m# Check this file into git to share hooks across all developers.[0m
  [2m[0m
  [2m# ============================================================================[0m
  [2m# Hook Formats[0m
  [2m# ============================================================================[0m
  [2m# All hooks support two formats:[0m
  [2m#[0m
  [2m# Single command:[0m
  [2m#   post-create = "npm install"[0m
  [2m#[0m
  [2m# Named table (multiple commands):[0m
  [2m#   [post-create][0m
  [2m#   deps = "npm install"[0m
  [2m#   build = "npm run build"[0m
  [2m#[0m
  [2m# Named commands appear in output, making it easier to identify failures.[0m
  [2m[0m
  [2m# ============================================================================[0m
  [2m# Template Variables â€” see https://worktrunk.dev/hook/#template-variables[0m
  [2m# ============================================================================[0m
  [2m# Common variables:[0m
  [2m#   {{ repo }}               - Repository directory name (e.g., "myproject")[0m
  [2m#   {{ branch }}             - Branch name (e.g., "feature/auth")[0m
  [2m#   {{ worktree_path }}      - Absolute path to worktree[0m
  [2m#   {{ primary_worktree_path }} - Main worktree (or default branch worktree for bare repos)[0m
  [2m#   {{ default_branch }}     - Default branch name (e.g., "main")[0m
  [2m#   {{ target }}             - Target branch (merge hooks only)[0m
  [2m#[0m
  [2m# Filters:[0m
  [2m#   {{ branch | sanitize }}     - Replace / and \ with - (e.g., "feature-auth")[0m
  [2m#   {{ branch | sanitize_db }}  - Database-safe identifier with hash suffix (e.g., "feature_auth_x7k")[0m
  [2m#   {{ branch | hash_port }}    - Deterministic port 10000-19999[0m
  [2m[0m
  [2m# ============================================================================[0m
  [2m# Hooks[0m
  [2m# ============================================================================[0m
  [2m[0m
  [2m# Post-Create: Runs after worktree creation, BLOCKS until complete[0m
  [2m# Use for: installing dependencies, setting up databases, copying configs[0m
  [2m#[0m
  [2m# [post-create][0m
  [2m# deps = "npm ci"[0m
  [2m# env = "cp .env.example .env"[0m
  [2m[0m
  [2m# Post-Start: Runs in BACKGROUND after worktree creation (parallel)[0m
  [2m# Use for: dev servers, file watchers, background builds[0m
  [2m# Output logged to .git/wt-logs/{branch}-project-post-start-{name}.log[0m
  [2m#[0m
  [2m# [post-start][0m
  [2m# server = "npm run dev -- --port {{ branch | hash_port }}"[0m
  [2m# watch = "npm run watch"[0m
  [2m[0m
  [2m# Post-Switch: Runs in BACKGROUND after every switch (parallel)[0m
  [2m# Use for: terminal tab naming, tmux window titles, IDE notifications[0m
  [2m#[0m
  [2m# post-switch = "echo -ne '\\033]0;{{ branch }}\\007'"[0m
  [2m[0m
  [2m# Pre-Commit: Runs before committing during merge, BLOCKS (fail-fast)[0m
  [2m# Use for: formatters, linters, quick checks[0m
  [2m#[0m
  [2m# [pre-commit][0m
  [2m# format = "npm run format:check"[0m
  [2m# lint = "npm run lint"[0m
  [2m[0m
  [2m# Pre-Merge: Runs before merging to target, BLOCKS (fail-fast)[0m
  [2m# Use for: tests, build verification[0m
  [2m#[0m
  [2m# [pre-merge][0m
  [2m# test = "npm test"[0m
  [2m# build = "npm run build"[0m
  [2m[0m
  [2m# Post-Merge: Runs after successful merge, BLOCKS[0m
  [2m# Use for: deployment, notifications[0m
  [2m#[0m
  [2m# post-merge = "echo 'Merged {{ branch }} to {{ target }}'"[0m
  [2m[0m
  [2m# Pre-Remove: Runs before worktree removal, BLOCKS (fail-fast)[0m
  [2m# Use for: cleanup, stopping services[0m
  [2m#[0m
  [2m# pre-remove = "docker compose down"[0m
  [2m[0m
  [2m# ============================================================================[0m
  [2m# Dev Server URL (shown in `wt list`)[0m
  [2m# ============================================================================[0m
  [2m# [list][0m
  [2m# url = "http://localhost:{{ branch | hash_port }}"[0m
  [2m[0m
  [2m# ============================================================================[0m
  [2m# CI Platform Override[0m
  [2m# ============================================================================[0m
  [2m# Override CI platform detection for GitHub Enterprise or self-hosted GitLab[0m
  [2m# with custom domains where URL detection fails.[0m
  [2m#[0m
  [2m# [ci][0m
  [2m# platform = "github"  # or "gitlab"[0m
