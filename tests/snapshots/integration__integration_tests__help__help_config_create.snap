---
source: tests/integration_tests/help.rs
info:
  program: wt
  args:
    - config
    - create
    - "--help"
  env:
    CLICOLOR_FORCE: "1"
    COLUMNS: "500"
    GIT_EDITOR: ""
    RUST_LOG: warn
    SOURCE_DATE_EPOCH: "1735776000"
    TERM: alacritty
    WORKTRUNK_CONFIG_PATH: /nonexistent/test/config.toml
    WORKTRUNK_TEST_SKIP_URL_HEALTH_CHECK: "1"
---
success: true
exit_code: 0
----- stdout -----

----- stderr -----
wt config create - Create configuration file

Usage: [1m[36mwt config create[0m [36m[OPTIONS]

[1m[32mOptions:
      [1m[36m--project
          Create project config ([1m.config/wt.toml[0m) instead of user config

  [1m[36m-h[0m, [1m[36m--help
          Print help (see a summary with '-h')

[1m[32mGlobal Options:
  [1m[36m-C[0m[36m [0m[36m<path>
          Working directory for this command

      [1m[36m--config[0m[36m [0m[36m<path>
          User config file path

  [1m[36m-v[0m, [1m[36m--verbose[0m[36m...
          Show debug info (-v), or also write diagnostic report (-vv)

[32mUser config

Creates [2m~/.config/worktrunk/config.toml[0m with the following content:

  [2m# # Worktrunk User Configuration
  [2m#
  [2m# Create with `wt config create`.
  [2m#
  [2m# Location:
  [2m#
  [2m# - macOS/Linux: `~/.config/worktrunk/config.toml` (or `$XDG_CONFIG_HOME` if set)
  [2m# - Windows: `%APPDATA%\worktrunk\config.toml`
  [2m#
  [2m# ## Worktree path template
  [2m#
  [2m# Controls where new worktrees are created. Paths are relative to the repository root.
  [2m#
  [2m# **Variables:**
  [2m#
  [2m# - `{{ repo }}` â€” repository directory name
  [2m# - `{{ branch }}` â€” raw branch name (e.g., `feature/auth`)
  [2m# - `{{ branch | sanitize }}` â€” filesystem-safe: `/` and `\` become `-` (e.g., `feature-auth`)
  [2m# - `{{ branch | sanitize_db }}` â€” database-safe: lowercase, underscores, hash suffix (e.g., `feature_auth_x7k`)
  [2m#
  [2m# **Examples** for repo at `~/code/myproject`, branch `feature/auth`:
  [2m#
  [2m# # Default â€” siblings in parent directory
  [2m# # Creates: ~/code/myproject.feature-auth
  [2m# worktree-path = "../{{ repo }}.{{ branch | sanitize }}"
  [2m#
  [2m# # Inside the repository
  [2m# # Creates: ~/code/myproject/.worktrees/feature-auth
  [2m# worktree-path = ".worktrees/{{ branch | sanitize }}"
  [2m#
  [2m# # Namespaced (useful when multiple repos share a parent directory)
  [2m# # Creates: ~/code/worktrees/myproject/feature-auth
  [2m# worktree-path = "../worktrees/{{ repo }}/{{ branch | sanitize }}"
  [2m#
  [2m# # Nested bare repo (git clone --bare <url> project/.git)
  [2m# # Creates: ~/code/project/feature-auth (sibling to .git)
  [2m# worktree-path = "../{{ branch | sanitize }}"
  [2m#
  [2m# ## List command defaults
  [2m#
  [2m# Persistent flag values for `wt list`. Override on command line as needed.
  [2m#
  [2m# [list]
  [2m# full = false       # Show CI status and mainâ€¦Â± diffstat columns (--full)
  [2m# branches = false   # Include branches without worktrees (--branches)
  [2m# remotes = false    # Include remote-only branches (--remotes)
  [2m#
  [2m# ## Commit defaults
  [2m#
  [2m# Shared by `wt step commit`, `wt step squash`, and `wt merge`.
  [2m#
  [2m# [commit]
  [2m# stage = "all"      # What to stage before commit: "all", "tracked", or "none"
  [2m#
  [2m# ## Merge command defaults
  [2m#
  [2m# All flags are on by default. Set to false to change default behavior.
  [2m#
  [2m# [merge]
  [2m# squash = true      # Squash commits into one (--no-squash to preserve history)
  [2m# commit = true      # Commit uncommitted changes first (--no-commit to skip)
  [2m# rebase = true      # Rebase onto target before merge (--no-rebase to skip)
  [2m# remove = true      # Remove worktree after merge (--no-remove to keep)
  [2m# verify = true      # Run project hooks (--no-verify to skip)
  [2m#
  [2m# ## Select command defaults
  [2m#
  [2m# Pager behavior for `wt select` diff previews.
  [2m#
  [2m# [select]
  [2m# # Pager command with flags for diff preview (overrides git's core.pager)
  [2m# # Use this to specify pager flags needed for non-TTY contexts
  [2m# # Example:
  [2m# # pager = "delta --paging=never"
  [2m#
  [2m# ## LLM commit messages
  [2m#
  [2m# Generate commit messages automatically during merge. Requires an external CLI tool. See <https://worktrunk.dev/llm-commits/> for setup details and template customization.
  [2m#
  [2m# Using [llm](https://github.com/simonw/llm) (install: `pip install llm llm-anthropic`):
  [2m#
  [2m# [commit-generation]
  [2m# command = "llm"
  [2m# args = ["-m", "claude-haiku-4.5"]
  [2m#
  [2m# Using [aichat](https://github.com/sigoden/aichat):
  [2m#
  [2m# [commit-generation]
  [2m# command = "aichat"
  [2m# args = ["-m", "claude:claude-haiku-4.5"]
  [2m#
  [2m# See [Custom Prompt Templates](#custom-prompt-templates) for inline template options.
  [2m#
  [2m# ## Approved commands
  [2m#
  [2m# Commands approved for project hooks. Auto-populated when approving hooks on first run, or via `wt hook approvals add`.
  [2m#
  [2m# [projects."github.com/user/repo"]
  [2m# approved-commands = ["npm ci", "npm test"]
  [2m#
  [2m# For project-specific hooks (post-create, post-start, pre-merge, etc.), use a project config at `<repo>/.config/wt.toml`. Run `wt config create --project` to create one, or see <https://worktrunk.dev/hook/>.
  [2m#
  [2m# ## Custom prompt templates
  [2m#
  [2m# Templates use [minijinja](https://docs.rs/minijinja/) syntax.
  [2m#
  [2m# ### Commit template
  [2m#
  [2m# Available variables:
  [2m#
  [2m# - `{{ git_diff }}`, `{{ git_diff_stat }}` â€” diff content
  [2m# - `{{ branch }}`, `{{ repo }}` â€” context
  [2m# - `{{ recent_commits }}` â€” recent commit messages
  [2m#
  [2m# Default template:
  [2m#
  [2m# <!-- DEFAULT_TEMPLATE_START -->
  [2m# [commit-generation]
  [2m# template = """
  [2m# Write a commit message for the staged changes below.
  [2m#
  [2m# <format>
  [2m# - Subject under 50 chars, blank line, then optional body
  [2m# - Output only the commit message, no quotes or code blocks
  [2m# </format>
  [2m#
  [2m# <style>
  [2m# - Imperative mood: "Add feature" not "Added feature"
  [2m# - Match recent commit style (conventional commits if used)
  [2m# - Describe the change, not the intent or benefit
  [2m# </style>
  [2m#
  [2m# <diffstat>
  [2m# {{ git_diff_stat }}
  [2m# </diffstat>
  [2m#
  [2m# <diff>
  [2m# {{ git_diff }}
  [2m# </diff>
  [2m#
  [2m# <context>
  [2m# Branch: {{ branch }}
  [2m# {% if recent_commits %}<recent_commits>
  [2m# {% for commit in recent_commits %}- {{ commit }}
  [2m# {% endfor %}</recent_commits>{% endif %}
  [2m# </context>
  [2m#
  [2m# """
  [2m# <!-- DEFAULT_TEMPLATE_END -->
  [2m#
  [2m# ### Squash template
  [2m#
  [2m# Available variables (in addition to commit template variables):
  [2m#
  [2m# - `{{ commits }}` â€” list of commits being squashed
  [2m# - `{{ target_branch }}` â€” merge target branch
  [2m#
  [2m# Default template:
  [2m#
  [2m# <!-- DEFAULT_SQUASH_TEMPLATE_START -->
  [2m# [commit-generation]
  [2m# squash-template = """
  [2m# Combine these commits into a single commit message.
  [2m#
  [2m# <format>
  [2m# - Subject under 50 chars, blank line, then optional body
  [2m# - Output only the commit message, no quotes or code blocks
  [2m# </format>
  [2m#
  [2m# <style>
  [2m# - Imperative mood: "Add feature" not "Added feature"
  [2m# - Match the style of commits being squashed (conventional commits if used)
  [2m# - Describe the change, not the intent or benefit
  [2m# </style>
  [2m#
  [2m# <commits branch="{{ branch }}" target="{{ target_branch }}">
  [2m# {% for commit in commits %}- {{ commit }}
  [2m# {% endfor %}</commits>
  [2m#
  [2m# <diffstat>
  [2m# {{ git_diff_stat }}
  [2m# </diffstat>
  [2m#
  [2m# <diff>
  [2m# {{ git_diff }}
  [2m# </diff>
  [2m#
  [2m# """
  [2m# <!-- DEFAULT_SQUASH_TEMPLATE_END -->

[32mProject config

With [2m--project[0m, creates [2m.config/wt.toml[0m in the current repository:

  [2m# Worktrunk Project Configuration
  [2m# Copy to: <repo>/.config/wt.toml
  [2m#
  [2m# Project-specific hooks that run automatically during worktree operations.
  [2m# Check this file into git to share hooks across all developers.
  [2m
  [2m# ============================================================================
  [2m# Hook Formats
  [2m# ============================================================================
  [2m# All hooks support two formats:
  [2m#
  [2m# Single command:
  [2m#   post-create = "npm install"
  [2m#
  [2m# Named table (multiple commands):
  [2m#   [post-create]
  [2m#   deps = "npm install"
  [2m#   build = "npm run build"
  [2m#
  [2m# Named commands appear in output, making it easier to identify failures.
  [2m
  [2m# ============================================================================
  [2m# Template Variables â€” see https://worktrunk.dev/hook/#template-variables
  [2m# ============================================================================
  [2m# Common variables:
  [2m#   {{ repo }}               - Repository directory name (e.g., "myproject")
  [2m#   {{ branch }}             - Branch name (e.g., "feature/auth")
  [2m#   {{ worktree_path }}      - Absolute path to worktree
  [2m#   {{ primary_worktree_path }} - Main worktree (or default branch worktree for bare repos)
  [2m#   {{ default_branch }}     - Default branch name (e.g., "main")
  [2m#   {{ target }}             - Target branch (merge hooks only)
  [2m#
  [2m# Filters:
  [2m#   {{ branch | sanitize }}     - Replace / and \ with - (e.g., "feature-auth")
  [2m#   {{ branch | sanitize_db }}  - Database-safe identifier with hash suffix (e.g., "feature_auth_x7k")
  [2m#   {{ branch | hash_port }}    - Deterministic port 10000-19999
  [2m
  [2m# ============================================================================
  [2m# Hooks
  [2m# ============================================================================
  [2m
  [2m# Post-Create: Runs after worktree creation, BLOCKS until complete
  [2m# Use for: installing dependencies, setting up databases, copying configs
  [2m#
  [2m# [post-create]
  [2m# deps = "npm ci"
  [2m# env = "cp .env.example .env"
  [2m
  [2m# Post-Start: Runs in BACKGROUND after worktree creation (parallel)
  [2m# Use for: dev servers, file watchers, background builds
  [2m# Output logged to .git/wt-logs/{branch}-project-post-start-{name}.log
  [2m#
  [2m# [post-start]
  [2m# server = "npm run dev -- --port {{ branch | hash_port }}"
  [2m# watch = "npm run watch"
  [2m
  [2m# Post-Switch: Runs in BACKGROUND after every switch (parallel)
  [2m# Use for: terminal tab naming, tmux window titles, IDE notifications
  [2m#
  [2m# post-switch = "echo -ne '\\033]0;{{ branch }}\\007'"
  [2m
  [2m# Pre-Commit: Runs before committing during merge, BLOCKS (fail-fast)
  [2m# Use for: formatters, linters, quick checks
  [2m#
  [2m# [pre-commit]
  [2m# format = "npm run format:check"
  [2m# lint = "npm run lint"
  [2m
  [2m# Pre-Merge: Runs before merging to target, BLOCKS (fail-fast)
  [2m# Use for: tests, build verification
  [2m#
  [2m# [pre-merge]
  [2m# test = "npm test"
  [2m# build = "npm run build"
  [2m
  [2m# Post-Merge: Runs after successful merge, BLOCKS
  [2m# Use for: deployment, notifications
  [2m#
  [2m# post-merge = "echo 'Merged {{ branch }} to {{ target }}'"
  [2m
  [2m# Pre-Remove: Runs before worktree removal, BLOCKS (fail-fast)
  [2m# Use for: cleanup, stopping services
  [2m#
  [2m# pre-remove = "docker compose down"
  [2m
  [2m# ============================================================================
  [2m# Dev Server URL (shown in `wt list`)
  [2m# ============================================================================
  [2m# [list]
  [2m# url = "http://localhost:{{ branch | hash_port }}"
  [2m
  [2m# ============================================================================
  [2m# CI Platform Override
  [2m# ============================================================================
  [2m# Override CI platform detection for GitHub Enterprise or self-hosted GitLab
  [2m# with custom domains where URL detection fails.
  [2m#
  [2m# [ci]
  [2m# platform = "github"  # or "gitlab"
