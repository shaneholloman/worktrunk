---
source: tests/integration_tests/help.rs
assertion_line: 16
info:
  program: wt
  args:
    - list
    - "--help"
  env:
    CLICOLOR_FORCE: "1"
    COLUMNS: "150"
    GIT_EDITOR: ""
---
success: true
exit_code: 0
----- stdout -----
wt-list - List worktrees and optionally branches
Usage: wt list [OPTIONS]

Options:
  -C <path>
      Change working directory

  --format <FORMAT>
      Output format

      Possible values:                    
      - table: Human-readable table format
      - json:  JSON output                
                                          
      [default: table]                    

  --branches                            
      Include branches without worktrees

  -v, --verbose
      Show commands and debug info

  --full                                                                          
      Show CI, conflicts, diffs                                                   
                                                                                  
      Adds CI column, main‚Ä¶¬± diffs, and conflict detection (merge-tree +          
network).                                                                         

  --progressive                                                     
      Progressive rendering                                         
                                                                    
      Use --progressive or --no-progressive to force rendering mode.
      Default: auto (enabled for TTY, disabled for pipes).          

  -h, --help
      Print help (see a summary with '-h')

[38;5;10mOPERATION[39m

Displays worktrees in a table format with status information, commit details, 
and optional branch listings.

- By default: Shows only worktrees
- With --branches: Includes branches without worktrees
- With --full: Adds CI status, conflict detection, and detailed diffs
- With --format=json: Outputs structured JSON for scripting

[38;5;10mCOLUMNS[39m

- Branch: Branch name
- Status: Quick status symbols (see STATUS SYMBOLS below)
- HEAD¬±: Uncommitted changes vs HEAD (+added -deleted lines, staged + unstaged)
- main‚Üï: Commit count ahead‚Üë/behind‚Üì relative to main (commits in HEAD vs main)
- main‚Ä¶¬± (--full): Line diffs in commits ahead of main (+added -deleted)
- Path: Worktree directory location
- Remote‚áÖ: Commits ahead‚Üë/behind‚Üì relative to tracking branch (e.g. 
origin/branch)
- CI (--full): CI pipeline status (tries PR/MR checks first, falls back to 
branch workflows)
  - [32m‚óè[0m passed (green) - All checks passed
  - [34m‚óè[0m running (blue) - Checks in progress
  - [31m‚óè[0m failed (red) - Checks failed
  - [33m‚óè[0m conflicts (yellow) - Merge conflicts with base
  - [90m‚óè[0m no-ci (gray) - PR/MR or workflow found but no checks configured
  - (blank) - No PR/MR or workflow found, or gh/glab CLI unavailable
  - (dimmed) - Stale: unpushed local changes differ from PR/MR head
- Commit: Short commit hash (8 chars)
- Age: Time since last commit (relative)
- Message: Last commit message (truncated)

[38;5;10mSTATUS SYMBOLS[39m

Order: ?!+¬ª‚úò ‚úñ‚ö†‚â°‚àÖ ‚Üª‚ãà ‚Üë‚Üì‚Üï ‚á°‚á£‚áÖ ‚éá‚å´‚ä†

- [36m?[0m Untracked files present
- [36m![0m Modified files (unstaged changes)
- [36m+[0m Staged files (ready to commit)
- [36m¬ª[0m Renamed files
- [36m‚úò[0m Deleted files
- [31m‚úñ[0m Merge conflicts - unresolved conflicts in working tree (fix before 
continuing)
- [33m‚ö†[0m Would conflict - merging into main would fail
- [2m‚â°[0m Working tree matches main (identical contents, regardless of commit history)
- [2m‚àÖ[0m No commits (no commits ahead AND no uncommitted changes)
- [33m‚Üª[0m Rebase in progress
- [33m‚ãà[0m Merge in progress
- ‚Üë Ahead of main branch
- ‚Üì Behind main branch
- ‚Üï Diverged (both ahead and behind main)
- ‚á° Ahead of remote tracking branch
- ‚á£ Behind remote tracking branch
- ‚áÖ Diverged (both ahead and behind remote)
- ‚éá Branch indicator (shown for branches without worktrees)
- ‚å´ Prunable worktree (directory missing, can be pruned)
- [33m‚ä†[0m Locked worktree (protected from auto-removal)

Rows are dimmed when no unique work (‚â° matches main OR ‚àÖ no commits).

[38;5;10mJSON OUTPUT[39m

Use --format=json for structured data. Each object contains two status maps:

status (variant names for querying):
- branch_state: "" | "Conflicts" | "MergeTreeConflicts" | "MatchesMain" | 
"NoCommits"
- git_operation: "" | "Rebase" | "Merge"
- worktree_attrs: object (worktrees only) with:
  - locked: null | "reason string"
  - prunable: null | "reason string"
- main_divergence: "" | "Ahead" | "Behind" | "Diverged"
- upstream_divergence: "" | "Ahead" | "Behind" | "Diverged"
- working_tree: object with booleans
  - untracked: boolean - untracked files present
  - modified: boolean - unstaged changes
  - staged: boolean - staged changes
  - renamed: boolean - renamed files
  - deleted: boolean - deleted files
- user_status: string (optional) - custom status from git config

status_symbols (display symbols for rendering):
- branch_state: "" | "‚úñ" | "‚ö†" | "‚â°" | "‚àÖ"
- git_operation: "" | "‚Üª" | "‚ãà"
- worktree_attrs: "‚éá" (branch) | "‚å´" (prunable) | "‚ä†" (locked) | ""
- main_divergence: "" | "‚Üë" | "‚Üì" | "‚Üï"
- upstream_divergence: "" | "‚á°" | "‚á£" | "‚áÖ"
- working_tree: string - combination of "?!+¬ª‚úò"
- user_status: string (optional) - same as status.user_status

Query examples:

  # Find worktrees with conflicts
  jq '.[] | select(.status.branch_state == "Conflicts")'

  # Find locked worktrees
  jq '.[] | select(.status.worktree_attrs.locked != null)'

  # Find worktrees with untracked files
  jq '.[] | select(.status.working_tree.untracked == true)'

  # Find worktrees in rebase or merge
  jq '.[] | select(.status.git_operation != "")'

  # Get branches ahead of main
  jq '.[] | select(.status.main_divergence == "Ahead")'

----- stderr -----
