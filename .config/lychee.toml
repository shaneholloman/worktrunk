# Lychee link checker configuration
# See: https://lychee.cli.rs/

# Network resilience - handles transient failures
max_retries = 5
timeout = 20
max_redirects = 5

# Accepted HTTP status codes
accept = [200, 206, 429]

# Caching to reduce rate limiting and improve performance
cache = true
max_cache_age = "1d"

# Exclude sites that block GitHub Actions or have reliability issues
exclude = [
    # Social media (blocks GitHub Actions)
    "twitter\\.com",
    "x\\.com",
    "reddit\\.com",

    # Sites with reliability issues in CI
    "stackoverflow\\.com",
    "npmjs\\.com",

    # Package registries (frequently return 429 or block CI)
    "crates\\.io",
    "docs\\.rs",
    "img\\.shields\\.io",

    # Sites already excluded in markdown-link-check
    "opensource\\.org",
    "llm\\.datasette\\.io",

    # Local build artifacts (not checked into git)
    "wt-demo/out/wt-demo\\.gif",
]

# Exclude files with relative paths intended for different locations
exclude_path = [
    ".claude-plugin/skills/worktrunk/reference/README.md",
]
